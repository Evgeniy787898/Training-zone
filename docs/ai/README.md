# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è AI (Gemini)

> **–í–µ—Ä—Å–∏—è:** 1.0.0  
> **–î–∞—Ç–∞:** 2025-12-07

## –û–±–∑–æ—Ä

TZONA –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Google Gemini API** –¥–ª—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:
- AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç (—Å–æ–≤–µ—Ç—ã, –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã)
- –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

---

## –ü–æ–ª—É—á–µ–Ω–∏–µ API-–∫–ª—é—á–∞ Gemini

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ Google Cloud

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [Google AI Studio](https://aistudio.google.com/)
2. –í–æ–π–¥–∏—Ç–µ —Å Google-–∞–∫–∫–∞—É–Ω—Ç–æ–º
3. –ù–∞–∂–º–∏—Ç–µ **"Get API Key"** ‚Üí **"Create API Key"**
4. –í—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `AIza...`)

> [!CAUTION]
> –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ API-–∫–ª—é—á –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–ª–∏ –ª–æ–≥–∞—Ö!

### –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞ –≤ `.env`

```bash
# –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
GEMINI_API_KEY=AIzaSy...–≤–∞—à_–∫–ª—é—á...
AI_ADVISOR_PROVIDER=gemini
AI_ADVISOR_MODEL=gemini-1.5-flash
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
./start-with-ngrok.sh

# –í –ª–æ–≥–∞—Ö AI Advisor –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
# ai-advisor | Provider: gemini, Model: gemini-1.5-flash
```

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------------|-------------|----------|--------|
| `GEMINI_API_KEY` | ‚úÖ –î–∞ | API-–∫–ª—é—á Google Gemini | `AIzaSy...` |
| `AI_ADVISOR_PROVIDER` | –ù–µ—Ç | –ü—Ä–æ–≤–∞–π–¥–µ—Ä LLM (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: openai) | `gemini` |
| `AI_ADVISOR_MODEL` | –ù–µ—Ç | –ú–æ–¥–µ–ª—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: gpt-4o-mini) | `gemini-1.5-flash` |
| `AI_ADVISOR_TEMPERATURE` | –ù–µ—Ç | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (0.0-1.0) | `0.2` |
| `AI_ADVISOR_MAX_TOKENS` | –ù–µ—Ç | –ú–∞–∫—Å. —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ | `800` |
| `AI_ADVISOR_BASE_PROMPT` | ‚úÖ –î–∞ | –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç | `You are a fitness coach...` |

---

## –ú–æ–¥–µ–ª–∏ Gemini

| –ú–æ–¥–µ–ª—å | –°–∫–æ—Ä–æ—Å—Ç—å | –ö–∞—á–µ—Å—Ç–≤–æ | –°—Ç–æ–∏–º–æ—Å—Ç—å | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|--------|----------|----------|-----------|--------------|
| `gemini-1.5-flash` | ‚ö° –ë—ã—Å—Ç—Ä–∞—è | ‚≠ê‚≠ê‚≠ê | $ | **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** –¥–ª—è —á–∞—Ç–∞ –∏ —Å–æ–≤–µ—Ç–æ–≤ |
| `gemini-1.5-pro` | üîÑ –°—Ä–µ–¥–Ω—è—è | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | $$$ | –î–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ |

---

## Troubleshooting

### –û—à–∏–±–∫–∞: "GEMINI_API_KEY is required"

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–ª—é—á –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.env` –∏–ª–∏ `AI_ADVISOR_PROVIDER` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `gemini`.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª
grep GEMINI .env
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# GEMINI_API_KEY=AIzaSy...
# AI_ADVISOR_PROVIDER=gemini
```

### –û—à–∏–±–∫–∞: "Rate limit exceeded" (429)

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Gemini API.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–∂–¥–∏—Ç–µ—Å—å 1 –º–∏–Ω—É—Ç—É –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–≤–æ—Ç—ã –≤ [Google Cloud Console](https://console.cloud.google.com/apis/api/generativelanguage.googleapis.com/quotas)
- –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω

### –û—à–∏–±–∫–∞: "API key not valid"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–ª—é—á –≤ [Google AI Studio](https://aistudio.google.com/apikey)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á –µ—Å–ª–∏ —Å—Ç–∞—Ä—ã–π —É–¥–∞–ª—ë–Ω
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Gemini API –≤–∫–ª—é—á–µ–Ω –≤ –ø—Ä–æ–µ–∫—Ç–µ

### AI –æ—Ç–≤–µ—á–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ (>5 —Å–µ–∫—É–Ω–¥)

**–ü—Ä–∏—á–∏–Ω–∞:** `gemini-1.5-pro` –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —á–µ–º `flash`.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
AI_ADVISOR_MODEL=gemini-1.5-flash
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

> [!IMPORTANT]
> API-–∫–ª—é—á –ù–ò–ö–û–ì–î–ê –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–ª—è—Ç—å—Å—è –≤:
> - Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (`.env` –≤ `.gitignore` ‚úÖ)
> - –õ–æ–≥–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
> - README –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
> - UI –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

### –•—Ä–∞–Ω–µ–Ω–∏–µ –∫–ª—é—á–∞

| –û–∫—Ä—É–∂–µ–Ω–∏–µ | –°–ø–æ—Å–æ–± —Ö—Ä–∞–Ω–µ–Ω–∏—è |
|-----------|-----------------|
| Local Dev | `.env` —Ñ–∞–π–ª (gitignored) |
| Railway | Railway Secrets |
| Docker | Docker Secrets / environment |
| Vercel | Vercel Environment Variables |

---

## –°—Ç–æ–∏–º–æ—Å—Ç—å

| –ú–æ–¥–µ–ª—å | Input | Output |
|--------|-------|--------|
| Gemini 1.5 Flash | $0.075/1M —Ç–æ–∫–µ–Ω–æ–≤ | $0.30/1M —Ç–æ–∫–µ–Ω–æ–≤ |
| Gemini 1.5 Pro | $1.25/1M —Ç–æ–∫–µ–Ω–æ–≤ | $5.00/1M —Ç–æ–∫–µ–Ω–æ–≤ |

**–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–ª—è TZONA:**
- ~100 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å √ó 500 —Ç–æ–∫–µ–Ω–æ–≤/–∑–∞–ø—Ä–æ—Å = ~50K —Ç–æ–∫–µ–Ω–æ–≤/–¥–µ–Ω—å
- Flash: ~$0.02/–¥–µ–Ω—å = **$0.60/–º–µ—Å—è—Ü**
- Pro: ~$0.35/–¥–µ–Ω—å = **$10.50/–º–µ—Å—è—Ü**

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [Architecture Overview](../architecture/README.md)
- [AI Advisor Service](../../services/ai-advisor/README.md)
- [Telegram Bot Setup](./telegram-bot.md) *(TODO)*
