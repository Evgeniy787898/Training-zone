# ==========================================
# TZONA V2 - Unified Configuration Template
# ==========================================
# Copy this file to .env and fill in the values.
# The setup.sh script will distribute this to all services.

# ------------------------------------------
# 1. Common / Infrastructure
# ------------------------------------------
NODE_ENV=development
ENVIRONMENT=development
LOG_LEVEL=info
PORT=3001

# ------------------------------------------
# 2. Database (Supabase / Postgres)
# ------------------------------------------
# Connect to Supabase Transaction Pooler (port 6543)
DATABASE_URL="postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-REF].supabase.co:6543/postgres?pgbouncer=true&connection_limit=6&pool_timeout=60"
# Direct connection for migrations (port 5432)
DIRECT_URL="postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-REF].supabase.co:5432/postgres"
SHADOW_DATABASE_URL="postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-REF].supabase.co:5432/postgres?schema=shadow"

# Supabase API
SUPABASE_URL="https://[YOUR-PROJECT-REF].supabase.co"
SUPABASE_ANON_KEY="[YOUR-ANON-KEY]"
SUPABASE_SERVICE_KEY="[YOUR-SERVICE-KEY]"

# ------------------------------------------
# 3. Backend (Express + Prisma)
# ------------------------------------------
APP_ENV=development
HOST="0.0.0.0"
WEBAPP_URL="https://[YOUR-WEBAPP-URL]"

# Security
JWT_SECRET="[YOUR-JWT-SECRET-MIN-32-CHARS]"
JWT_EXPIRES_IN=30d
ENCRYPTION_SECRET="[YOUR-ENCRYPTION-SECRET-MIN-32-CHARS]"
CSRF_SECRET="[YOUR-CSRF-SECRET-MIN-32-CHARS]"

# Redis
CACHE_REDIS_URL="redis://localhost:6379"
CACHE_NAMESPACE=tzona

# Telegram
TELEGRAM_BOT_TOKEN="[YOUR-TELEGRAM-BOT-TOKEN]"
TELEGRAM_WEBAPP_SECRET="[YOUR-TELEGRAM-WEBAPP-SECRET]"

# ------------------------------------------
# 4. Frontend (Vite + Vue)
# ------------------------------------------
# Note: Variables must start with VITE_ to be exposed to the client
VITE_API_BASE_URL="http://localhost:3001/api"

# ------------------------------------------
# 5. Microservices Configuration
# ------------------------------------------

# AI Advisor Service (Python)
AI_ADVISOR_ENABLED=true
AI_ADVISOR_BASE_URL="http://localhost:3003"
AI_ADVISOR_PROVIDER="openai"
AI_ADVISOR_MODEL="gpt-4o-mini"
OPENAI_API_KEY="[YOUR-OPENAI-API-KEY]"
ANTHROPIC_API_KEY=""
GEMINI_API_KEY="[YOUR-GEMINI-API-KEY]"
AI_ADVISOR_BASE_PROMPT="You are a friendly and knowledgeable fitness coach helping users with their training."

# Analytics Service (Python)
ANALYTICS_ENABLED=true
ANALYTICS_BASE_URL="http://localhost:3004"
ANALYTICS_DATABASE_URL="${DIRECT_URL}" # Usually same as main DB
ANALYTICS_DB_POOL_MIN=1
ANALYTICS_DB_POOL_MAX=5

# Image Processor Service (Python)
IMAGE_PROCESSOR_ENABLED=true
IMAGE_PROCESSOR_URL="http://localhost:3002"
IMAGE_PROCESSOR_MAX_DIMENSION=2048

# ------------------------------------------
# 6. Advanced / Tuning (Optional)
# ------------------------------------------
PRISMA_PREFER_POOL=true
LOG_ECHO_TO_CONSOLE=true
HTTP_KEEP_ALIVE=true

# Ngrok (for Telegram WebApp local development)
NGROK_TOKEN=your_ngrok_token_here
